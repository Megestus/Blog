import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,b as e,e as t,f as p,o as l}from"./app-CDnsGWbG.js";const i={};function o(c,n){return l(),a("div",null,[n[0]||(n[0]=e("p",null,"本文介绍如何在Maya中使用Qt设置窗口的父子关系,实现窗口置顶等功能。",-1)),t(" more "),n[1]||(n[1]=p(`<h2 id="qt窗口基础模板" tabindex="-1"><a class="header-anchor" href="#qt窗口基础模板"><span>Qt窗口基础模板</span></a></h2><h3 id="基本概念" tabindex="-1"><a class="header-anchor" href="#基本概念"><span>基本概念</span></a></h3><p>在Maya中使用Qt设置窗口父子关系主要需要:</p><ol><li>获取Maya主窗口作为父窗口</li><li>设置正确的窗口标志(Window Flags)</li><li>管理窗口实例</li></ol><h3 id="核心代码" tabindex="-1"><a class="header-anchor" href="#核心代码"><span>核心代码</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">import</span> maya<span class="token punctuation">.</span>cmds <span class="token keyword">as</span> cmds</span>
<span class="line"><span class="token keyword">from</span> PySide2 <span class="token keyword">import</span> QtWidgets<span class="token punctuation">,</span> QtCore</span>
<span class="line"><span class="token keyword">import</span> maya<span class="token punctuation">.</span>OpenMayaUI <span class="token keyword">as</span> omui</span>
<span class="line"><span class="token keyword">from</span> shiboken2 <span class="token keyword">import</span> wrapInstance</span>
<span class="line"></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">maya_main_window</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token triple-quoted-string string">&quot;&quot;&quot;</span>
<span class="line">    获取Maya主窗口作为父窗口</span>
<span class="line">    </span>
<span class="line">    功能:</span>
<span class="line">    - 使用OpenMayaUI获取Maya主窗口指针</span>
<span class="line">    - 通过shiboken2将Maya窗口指针转换为Qt窗口对象</span>
<span class="line">    </span>
<span class="line">    返回:</span>
<span class="line">    - QtWidgets.QWidget: Maya主窗口的Qt对象</span>
<span class="line">    &quot;&quot;&quot;</span></span>
<span class="line">    main_window_ptr <span class="token operator">=</span> omui<span class="token punctuation">.</span>MQtUtil<span class="token punctuation">.</span>mainWindow<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span> wrapInstance<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>main_window_ptr<span class="token punctuation">)</span><span class="token punctuation">,</span> QtWidgets<span class="token punctuation">.</span>QWidget<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ExampleWindow</span><span class="token punctuation">(</span>QtWidgets<span class="token punctuation">.</span>QDialog<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> parent<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token builtin">super</span><span class="token punctuation">(</span>ExampleWindow<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>parent<span class="token punctuation">)</span></span>
<span class="line">        </span>
<span class="line">        <span class="token comment"># 设置窗口标题</span></span>
<span class="line">        self<span class="token punctuation">.</span>setWindowTitle<span class="token punctuation">(</span><span class="token string">&quot;Example Window&quot;</span><span class="token punctuation">)</span></span>
<span class="line">        </span>
<span class="line">        <span class="token comment"># 设置窗口标志</span></span>
<span class="line">        self<span class="token punctuation">.</span>setWindowFlags<span class="token punctuation">(</span>self<span class="token punctuation">.</span>windowFlags<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">|</span> </span>
<span class="line">                          QtCore<span class="token punctuation">.</span>Qt<span class="token punctuation">.</span>Tool <span class="token operator">|</span></span>
<span class="line">                          QtCore<span class="token punctuation">.</span>Qt<span class="token punctuation">.</span>WindowStaysOnTopHint<span class="token punctuation">)</span></span>
<span class="line">        </span>
<span class="line">        <span class="token comment"># 创建UI</span></span>
<span class="line">        self<span class="token punctuation">.</span>create_widgets<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        self<span class="token punctuation">.</span>create_layouts<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        </span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">create_widgets</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        self<span class="token punctuation">.</span>test_button <span class="token operator">=</span> QtWidgets<span class="token punctuation">.</span>QPushButton<span class="token punctuation">(</span><span class="token string">&quot;Test Button&quot;</span><span class="token punctuation">)</span></span>
<span class="line">        </span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">create_layouts</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        main_layout <span class="token operator">=</span> QtWidgets<span class="token punctuation">.</span>QVBoxLayout<span class="token punctuation">(</span>self<span class="token punctuation">)</span></span>
<span class="line">        main_layout<span class="token punctuation">.</span>addWidget<span class="token punctuation">(</span>self<span class="token punctuation">.</span>test_button<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token triple-quoted-string string">&quot;&quot;&quot;</span>
<span class="line">    显示窗口的函数</span>
<span class="line">    </span>
<span class="line">    功能:</span>
<span class="line">    - 关闭已存在的窗口实例</span>
<span class="line">    - 创建新窗口并显示</span>
<span class="line">    &quot;&quot;&quot;</span></span>
<span class="line">    <span class="token keyword">global</span> example_window</span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">try</span><span class="token punctuation">:</span></span>
<span class="line">        example_window<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        example_window<span class="token punctuation">.</span>deleteLater<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">except</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">pass</span></span>
<span class="line">    </span>
<span class="line">    parent <span class="token operator">=</span> maya_main_window<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    example_window <span class="token operator">=</span> ExampleWindow<span class="token punctuation">(</span>parent<span class="token punctuation">)</span></span>
<span class="line">    example_window<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    example_window<span class="token punctuation">.</span>raise_<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    example_window<span class="token punctuation">.</span>activateWindow<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="关键功能说明" tabindex="-1"><a class="header-anchor" href="#关键功能说明"><span>关键功能说明</span></a></h3><ol><li>窗口标志设置</li></ol><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line">self<span class="token punctuation">.</span>setWindowFlags<span class="token punctuation">(</span>self<span class="token punctuation">.</span>windowFlags<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">|</span> </span>
<span class="line">                   QtCore<span class="token punctuation">.</span>Qt<span class="token punctuation">.</span>Tool <span class="token operator">|</span></span>
<span class="line">                   QtCore<span class="token punctuation">.</span>Qt<span class="token punctuation">.</span>WindowStaysOnTopHint<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>QtCore.Qt.Tool</code>: 使窗口保持在Maya主窗口之上</li><li><code>QtCore.Qt.WindowStaysOnTopHint</code>: 使窗口始终置顶</li></ul><ol start="2"><li>窗口实例管理</li></ol><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">def</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">global</span> example_window</span>
<span class="line">    <span class="token keyword">try</span><span class="token punctuation">:</span></span>
<span class="line">        example_window<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        example_window<span class="token punctuation">.</span>deleteLater<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">except</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">pass</span></span>
<span class="line">    </span>
<span class="line">    parent <span class="token operator">=</span> maya_main_window<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    example_window <span class="token operator">=</span> ExampleWindow<span class="token punctuation">(</span>parent<span class="token punctuation">)</span></span>
<span class="line">    example_window<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ps" tabindex="-1"><a class="header-anchor" href="#ps"><span>PS</span></a></h3><ol><li>窗口标志选择</li></ol><ul><li><code>QtCore.Qt.Tool</code>: 基本的置顶功能</li><li><code>WindowStaysOnTopHint</code>: 始终置顶 (可以选则性不要，这个是windows全局置顶)</li><li><code>FramelessWindowHint</code>: 无边框窗口(需要时使用)</li></ul><ol start="2"><li>父子关系管理</li></ol><ul><li>始终使用Maya主窗口作为父窗口</li><li>正确关闭和清理窗口实例</li><li>使用全局变量管理窗口实例</li></ul>`,17))])}const r=s(i,[["render",o],["__file","MayaQTwindowtop.html.vue"]]),k=JSON.parse('{"path":"/posts/maya/MayaQTwindowtop.html","title":"Maya Qt窗口父子关系设置指南","lang":"zh-CN","frontmatter":{"title":"Maya Qt窗口父子关系设置指南","icon":"iconfont alicon-maya1","category":["Maya","Python"],"tags":["Maya","Python","Qt","Window"],"description":"本文介绍如何在Maya中使用Qt设置窗口的父子关系,实现窗口置顶等功能。","head":[["meta",{"property":"og:url","content":"https:///about.md/blog/posts/maya/MayaQTwindowtop.html"}],["meta",{"property":"og:site_name","content":"Megestus"}],["meta",{"property":"og:title","content":"Maya Qt窗口父子关系设置指南"}],["meta",{"property":"og:description","content":"本文介绍如何在Maya中使用Qt设置窗口的父子关系,实现窗口置顶等功能。"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-11-03T05:04:57.000Z"}],["meta",{"property":"article:tag","content":"Maya"}],["meta",{"property":"article:tag","content":"Python"}],["meta",{"property":"article:tag","content":"Qt"}],["meta",{"property":"article:tag","content":"Window"}],["meta",{"property":"article:modified_time","content":"2024-11-03T05:04:57.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Maya Qt窗口父子关系设置指南\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-11-03T05:04:57.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Megestus\\",\\"url\\":\\"https://github.com/Megestus\\"}]}"]]},"headers":[{"level":2,"title":"Qt窗口基础模板","slug":"qt窗口基础模板","link":"#qt窗口基础模板","children":[{"level":3,"title":"基本概念","slug":"基本概念","link":"#基本概念","children":[]},{"level":3,"title":"核心代码","slug":"核心代码","link":"#核心代码","children":[]},{"level":3,"title":"关键功能说明","slug":"关键功能说明","link":"#关键功能说明","children":[]},{"level":3,"title":"PS","slug":"ps","link":"#ps","children":[]}]}],"git":{"createdTime":1730610297000,"updatedTime":1730610297000,"contributors":[{"name":"Megestus","email":"75190962+Megestus@users.noreply.github.com","commits":1}]},"filePathRelative":"posts/maya/MayaQTwindowtop.md","localizedDate":"2024年11月3日","excerpt":"<p>本文介绍如何在Maya中使用Qt设置窗口的父子关系,实现窗口置顶等功能。</p>\\n","autoDesc":true}');export{r as comp,k as data};
